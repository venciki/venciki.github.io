```js
var partitionLabels = function(s) {

    const last = new Array(26);
    const len = s.length;
    const aCodePointAt = 'a'.codePointAt(0);

    for (let i = 0; i < len; i++) {
        // s.codePointAt(i) 等价于 s[i].codePointAt(0)
        last[s.codePointAt(i) - aCodePointAt] = i;
    }

    let start = 0;
    let end = 0;
    const result = [];

    for (let i = 0; i < len; i++) {
        end = Math.max(end, last[s.codePointAt(i) - aCodePointAt]);
        if (end === i) {
            result.push(end - start + 1);
            start = end + 1;
        }
    }

    return result;
}
```