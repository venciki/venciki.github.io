---
title: Promise 如何实现链式调用
date: 2025-07-01
categories:
  - JavaScript
tags:
  - JavaScript
  - Promise
  - 手写
---

## 1. 简易版的 Promise

```js
//定义三种状态
const PENDING = "pending";
const FULFILLED = "fulfilled";
const REJECTED = "rejected";

function MyPromise(executor) {
    const self = this;
    self.status = PENDING;
    self.value = null;
    self.error = null; 
    self.onFulfilled = null; // 成功的回调函数
    self.onRejected = null; // 失败的回调函数

    resolve(value) {
        if (self.statis !== PENDING) {
            return;
        }
        self.status = FULFILLED;
        self.value = value;
        self.onFulfilled(self.value);
    }

    reject(error) {
        if (self.status !== PENDING) {
            return;
        }
        self.status = REJECTED;
        self.error = error;
        self.onRejected(self.error);
    }
}

MyPromise.prototype.then = function(onFulfilled, onRejected) {
    if (this.status === PENDING) {
        this.onFulfilled = onFulfilled;
        this.onRejected = onRejected;
    }
    else if (this.status === FULFILLED) {
        onFulfilled(this.value);
    }
    else {
        onRejected(this.error);
    }
    return this;
}
```

## 2. 未完待续