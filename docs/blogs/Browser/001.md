---
title: 浏览器缓存策略
date: 2025-07-12
categories:
  - 浏览器
tags:
  - HTTP
  - 缓存
---

## 浏览器缓存策略

浏览器每次发起请求时，都会先在本地缓存中查找结果以及缓存标识，通过缓存标识来判断是否使用本地缓存。如果缓存有效，则使用本地缓存；否则，则向服务器发起请求并列带缓存标识。根据是否需要向服务器发起 HTTP 请求，将缓存过程分为两部分：强制缓存和协商缓存，强缓存优先于协商缓存。
+ 强缓存，服务器通知一浏览器一个缓存时间，在缓存时间内，下次请求都将使用本地缓存，不在缓存时间内，则执行协商缓存策略。
+ 协商缓存，让客户端和服务端之间能实现缓存文件是否更新的验证，提升缓存的复用率，将缓存中信息中的 Etag 和 Last-Modified 通过请求发送给服务器，由服务器校验，返回304状态码时，浏览器直接使用缓存。

HTTP 缓存都是从第二次请求开始的：
+ 第一次请求资源时，服务器返回资源，并在 response header 中回传资源的缓存策略。
+ 第二次请求时，浏览器判断这些请求参数，击中强缓存直接就 200， 否则就把请求参数加到 request header 中传给服务器，看是否击中协商缓存，击中就返回304，否则服务器会返回新的资源。

## 强缓存
1. 强缓存命中则直接读取浏览器本地的资源，在 network 中显示的是 from memory 或者 from disk。
2. 强缓存的控制字段有 Cache-Control（http1.1）和 Exprise（http1.0）
3. Cache-Control 是一个相对时间，用以表示自上次请求正确的资源之后的多少秒的时间段内缓存有效。
4. Exprise 是一个绝对时间，用以表达这个时间点前发起请求可以直接从浏览器中读取数据，而无需发起请求，
5. Cache-Control 的优先级比 Exprise 的优先级高。前者的出现是为了解决 Exprise 的浏览器时间被手动更改导缓存致判断错误的问题。如果同时出现则使用Cache-Control。

### exprise
...
### cache-control
...
## 协商缓存
...
### Last-Modified/If-Modified-since
...
### Etag/If-None-match
...